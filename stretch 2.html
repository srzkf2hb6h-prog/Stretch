<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–†–∞—Å—Ç—è–∂–∫–∞ ‚Äî 8 –º–∏–Ω—É—Ç</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>

body {
    font-family: system-ui, -apple-system, sans-serif;
    background: #1c1c1e;
    color: #f2f2f2;
    margin: 0;
    padding: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
#header {
    background: #ffffff;
    color: #000000;
    padding: 10px 18px;
    margin: 14px auto 8px auto;
    border-radius: 12px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
    width: fit-content;
}

#header h1 {
    margin: 0;
    font-size: 18px;
    font-weight: 700;
    text-transform: uppercase;
}

/* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å */
#center-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding-top: 10px;
    padding-bottom: 10px;
    text-align: center;
}

#exercise-index {
    font-size: 13px;
    color: #aaa;
    margin-bottom: 4px;
    height: 16px;
}

#exercise {
    font-size: 26px;
    font-weight: 600;
    margin-bottom: 6px;
}

#emoji-box {
    font-size: 52px;
    margin-bottom: 8px;
}

/* –¢–∞–π–º–µ—Ä */
.timer-circle {
    position: relative;
    width: 200px;
    height: 200px;
    margin: 8px auto;
}

svg.timer-svg {
    transform: rotate(-90deg);
}

#progress-ring {
    stroke: #4CAF50;
    stroke-width: 12;
    fill: transparent;
    transition: stroke-dashoffset 1s linear;
}

#background-ring {
    stroke: #444;
    stroke-width: 12;
    fill: transparent;
}

#timer {
    position: absolute;
    top: 78px;
    left: 0;
    width: 100%;
    font-size: 32px;
    font-weight: bold;
}

/* –ë–ª–æ–∫ –∫–Ω–æ–ø–æ–∫ */
#controls-wrapper {
    padding: 14px 0 24px 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.side-space {
    width: 52px;
    display: flex;
    justify-content: center;
}

#controls-center {
    display: flex;
    justify-content: center;
    gap: 10px;
}

button {
    padding: 10px 18px;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 17px;
    cursor: pointer;
}

#pause-btn { background: #FF9800; }
#cancel-btn { background: #B00020; }

.arrow-btn {
    background: #3a3a3c;
    min-width: 48px;
}

#restart-btn {
    margin-top: 18px;
    padding: 14px 28px;
    font-size: 18px;
    background: #4CAF50;
    border-radius: 10px;
}

/* –ü—Ä–æ—á–µ–µ */
#hint {
    font-size: 13px;
    color: #bbb;
    margin-top: 4px;
    margin-bottom: 6px;
}

.hidden { display: none; }
.invisible { visibility: hidden; }

</style>
</head>
<body>

<div id="header">
    <h1>–ö–æ–º–ø–ª–µ–∫—Å —Ä–∞—Å—Ç—è–∂–∫–∏ ‚Äî 8 –º–∏–Ω—É—Ç</h1>
</div>

<div id="center-area">

    <div id="exercise-index">&nbsp;</div>
    <div id="exercise">–ù–∞–∂–º–∏ ¬´–°—Ç–∞—Ä—Ç¬ª</div>
    <div id="emoji-box">üôÇ</div>

    <div class="timer-circle">
        <svg class="timer-svg" width="200" height="200">
            <circle id="background-ring" cx="100" cy="100" r="90" />
            <circle id="progress-ring" cx="100" cy="100" r="90" />
        </svg>
        <div id="timer">0</div>
    </div>

    <div id="hint">–ù–∞–∂–º–∏ ¬´–°—Ç–∞—Ä—Ç¬ª, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∫–æ–º–ø–ª–µ–∫—Å.</div>

    <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ü–µ -->
    <button id="restart-btn" class="hidden" onclick="restartWorkout()">–ù–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞</button>

</div>

<div id="controls-wrapper">

    <div class="side-space">
        <button id="prev-btn" class="arrow-btn invisible" onclick="prevExercise()">‚óÄ</button>
    </div>

    <div id="controls-center">
        <button id="start-btn" onclick="startWorkout()">–°—Ç–∞—Ä—Ç</button>
        <button id="pause-btn" class="hidden" onclick="togglePause()">–ü–∞—É–∑–∞</button>
        <button id="cancel-btn" class="hidden" onclick="cancelWorkout()">–û—Ç–º–µ–Ω–∞</button>
    </div>

    <div class="side-space">
        <button id="next-btn" class="arrow-btn invisible" onclick="nextExercise()">‚ñ∂</button>
    </div>

</div>

<script>

/* —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è */
const exercises = [
    { name: "–†–∞–∑–º–∏–Ω–∫–∞ —à–µ–∏", duration: 50, emoji: "üßç‚Äç‚ôÇÔ∏èüß†" },
    { name: "–ö–æ—à–∫–∞‚Äì–∫–æ—Ä–æ–≤–∞", duration: 60, emoji: "üê±üêÑ" },
    { name: "–ù–∏—Ç–µ–≤–∞—è –∏–≥–ª–∞", duration: 60, emoji: "üßµ" },
    { name: "–†–∞—Å—Ç—è–∂–∫–∞ —Ç—Ä–∞–ø–µ—Ü–∏–π", duration: 60, emoji: "üíÜ‚Äç‚ôÇÔ∏è" },
    { name: "–†–∞—Å—Ç—è–∂–∫–∞ –≥—Ä—É–¥–Ω—ã—Ö –º—ã—à—Ü", duration: 60, emoji: "üí™ü´Ä" },
    { name: "–î–µ—Ç—Å–∫–∞—è –ø–æ–∑–∞", duration: 60, emoji: "üßò‚Äç‚ôÇÔ∏è" },
    { name: "–†–∞—Å—Ç—è–∂–∫–∞ –±–æ–∫–æ–≤–æ–π –ª–∏–Ω–∏–∏ —Ç–µ–ª–∞", duration: 60, emoji: "‚ÜîÔ∏èüßç‚Äç‚ôÇÔ∏è" },
    { name: "–õ—ë–≥–∫–∞—è –ª–æ–¥–æ—á–∫–∞", duration: 60, emoji: "üö£‚Äç‚ôÇÔ∏è" }
];

let current = 0;
let timeLeft = 0;
let interval;
let paused = false;

/* —ç–ª–µ–º–µ–Ω—Ç—ã */
const circle = document.getElementById("progress-ring");
const startBtn  = document.getElementById("start-btn");
const pauseBtn  = document.getElementById("pause-btn");
const cancelBtn = document.getElementById("cancel-btn");
const prevBtn   = document.getElementById("prev-btn");
const nextBtn   = document.getElementById("next-btn");
const hintEl    = document.getElementById("hint");
const indexEl   = document.getElementById("exercise-index");
const restartBtn = document.getElementById("restart-btn");
const controlsWrapper = document.getElementById("controls-wrapper");

const radius = circle.r.baseVal.value;
const circumference = radius * 2 * Math.PI;
circle.style.strokeDasharray = `${circumference} ${circumference}`;
circle.style.strokeDashoffset = circumference;

function setProgress(p) {
    circle.style.strokeDashoffset = circumference - p * circumference;
}

/* –∑–≤—É–∫ */
let audioCtx = null;
function initAudio() {
    if (!audioCtx) {
        const AC = window.AudioContext || window.webkitAudioContext;
        if (AC) audioCtx = new AC();
    }
}
function beep() {
    if (!audioCtx) return;
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.frequency.value = 880;
    gain.gain.setValueAtTime(0.25, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.15);
    osc.connect(gain);
    gain.connect(audioCtx.destination);
    osc.start();
    osc.stop(audioCtx.currentTime + 0.15);
}

/* –≤–∏–±—Ä–∞—Ü–∏—è */
function vibrate() {
    if ("vibrate" in navigator) navigator.vibrate([80, 40, 80]);
}

/* –∫–Ω–æ–ø–∫–∏ */
function showInitialControls() {
    startBtn.classList.remove("hidden");
    pauseBtn.classList.add("hidden");
    cancelBtn.classList.add("hidden");
    prevBtn.classList.add("invisible");
    nextBtn.classList.add("invisible");
    restartBtn.classList.add("hidden");
    controlsWrapper.style.display = "flex";
}

function showRunningControls() {
    startBtn.classList.add("hidden");
    pauseBtn.classList.remove("hidden");
    cancelBtn.classList.remove("hidden");

    if (current === 0) {
        prevBtn.classList.add("invisible");
        nextBtn.classList.remove("invisible");
    } else if (current === exercises.length - 1) {
        prevBtn.classList.remove("invisible");
        nextBtn.classList.add("invisible");
    } else {
        prevBtn.classList.remove("invisible");
        nextBtn.classList.remove("invisible");
    }
}

/* –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä */
function updateExerciseIndex() {
    if (current >= exercises.length) {
        indexEl.innerHTML = "&nbsp;";
        return;
    }
    indexEl.textContent = `–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ ${current + 1} –∏–∑ ${exercises.length}`;
}

/* —Å—Ç–∞—Ä—Ç */
function startWorkout() {
    initAudio();
    current = 0;
    paused = false;
    hintEl.innerText = "";
    restartBtn.classList.add("hidden");
    runExercise();
}

/* —Å—Ç–∞—Ä—Ç —Å–Ω–∞—á–∞–ª–∞ */
function restartWorkout() {
    restartBtn.classList.add("hidden");
    startWorkout();
}

/* –æ—Ç–º–µ–Ω–∞ */
function cancelWorkout() {
    clearInterval(interval);
    paused = false;
    current = 0;
    document.getElementById("exercise").innerText = "–ù–∞–∂–º–∏ ¬´–°—Ç–∞—Ä—Ç¬ª";
    document.getElementById("emoji-box").innerText = "üôÇ";
    document.getElementById("timer").innerText = "0";
    indexEl.innerHTML = "&nbsp;";
    hintEl.innerText = "–ù–∞–∂–º–∏ ¬´–°—Ç–∞—Ä—Ç¬ª, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∫–æ–º–ø–ª–µ–∫—Å.";
    setProgress(0);
    restartBtn.classList.add("hidden");
    showInitialControls();
}

/* –ø–∞—É–∑–∞ */
function togglePause() {
    paused = !paused;
    pauseBtn.innerText = paused ? "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" : "–ü–∞—É–∑–∞";
}

/* —Å—Ç—Ä–µ–ª–∫–∏ */
function prevExercise() {
    clearInterval(interval);
    paused = false;
    current = Math.max(0, current - 1);
    runExercise();
}

function nextExercise() {
    clearInterval(interval);
    paused = false;
    current = Math.min(exercises.length - 1, current + 1);
    runExercise();
}

/* –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è */
function runExercise() {
    if (current >= exercises.length) {
        finishWorkout();
        return;
    }

    const ex = exercises[current];
    document.getElementById("exercise").innerText = ex.name;
    document.getElementById("emoji-box").innerText = ex.emoji;

    updateExerciseIndex();
    showRunningControls();
    beep();
    vibrate();

    timeLeft = ex.duration;
    updateTimer();
    setProgress(0);

    clearInterval(interval);
    interval = setInterval(() => {
        if (!paused) {
            timeLeft--;
            updateTimer();
        }
        if (timeLeft <= 0) {
            clearInterval(interval);
            current++;
            runExercise();
        }
    }, 1000);
}

/* –∫–æ–Ω–µ—Ü */
function finishWorkout() {
    document.getElementById("exercise").innerText = "–ì–æ—Ç–æ–≤–æ!";
    document.getElementById("emoji-box").innerText = "üôè";
    document.getElementById("timer").innerText = "0";
    indexEl.innerHTML = "&nbsp;";
    setProgress(1);

    hintEl.innerText = "–ö–æ–º–ø–ª–µ–∫—Å –∑–∞–≤–µ—Ä—à—ë–Ω";

    /* —Å–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ */
    controlsWrapper.style.display = "none";

    /* –ø–æ–∫–∞–∑—ã–≤–∞–µ–º ¬´–ù–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞¬ª */
    restartBtn.classList.remove("hidden");
}

/* —Ç–∞–π–º–µ—Ä */
function updateTimer() {
    document.getElementById("timer").innerText = timeLeft;
    setProgress(1 - timeLeft / exercises[current].duration);
}

/* —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */
showInitialControls();

</script>
</body>
</html>